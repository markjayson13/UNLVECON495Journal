---
layout: single
---
{% assign papers = site.pages | where: "is_paper", true %}
{% assign category_name = page.category_name | default: page.title %}
{% assign category_papers = papers | where_exp: "paper", "paper.categories contains category_name" %}

<p class="eyebrow">Category</p>
<h1>{{ category_name }}</h1>
{% if page.description %}
  <p class="muted">{{ page.description }}</p>
{% endif %}

{% if category_papers and category_papers.size > 0 %}
  <div class="card-grid">
    {% for paper in category_papers %}
      {% assign clean_title = paper.title %}
      {% if paper.title contains ":" %}
        {% assign title_parts = paper.title | split: ":" %}
        {% if title_parts.first contains "Paper" %}
          {% assign clean_title = title_parts.last | strip %}
        {% endif %}
      {% endif %}
      {% assign pdf_path = paper.pdf_path | default: paper.pdf %}
      <article class="card paper-card">
        <div class="paper-meta">
          {% if paper.publication_date %}
            <span class="pill">{{ paper.publication_date }}</span>
          {% endif %}
          {% if paper.issue_title or paper.issue_slug %}
            <span class="pill light">{{ paper.issue_title | default: paper.issue_slug }}</span>
          {% endif %}
        </div>
        <h3><a href="{{ paper.url | relative_url }}">{{ clean_title }}</a></h3>
        {% if paper.authors %}
          <p class="muted small">By {{ paper.authors | join: ", " }}</p>
        {% endif %}
        {% if paper.abstract %}
          <p class="muted">{{ paper.abstract | strip_html | truncatewords: 40 }}</p>
        {% endif %}
        <div class="card-actions">
          <a class="btn btn-small" href="{{ paper.url | relative_url }}">Read abstract</a>
          {% if pdf_path %}
            <a class="btn btn-small btn-primary" href="{{ pdf_path | relative_url }}">Download PDF</a>
          {% endif %}
        </div>
      </article>
    {% endfor %}
  </div>
{% else %}
  <p class="muted">No papers yet in this category.</p>
{% endif %}
